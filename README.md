# CashTicket
전공심화프로젝트(3195) 5조 - 캐쉬 티켓(CashTicket) VIP 좌석 실시간 경매 서비스

## 초기 인프라 다이어그램
![전심프-인프라 drawio (2)](https://github.com/user-attachments/assets/1a56bd0e-313e-47f1-9e0a-5e420c8805d2)


## 1. 프로젝트 주제 (작품명)

**Cash Ticket(캐쉬 티켓)** - 콘서트 VIP 좌석 예매를 위한 실시간 경매 티켓팅 시스템으로, 대규모 트래픽 상황에서도 안정적으로 작동하는 티켓팅 환경 제공을 목표로 한다.

## 2. 프로젝트 개념 (Concept)

 본 프로젝트는 인기 아티스트의 콘서트 티켓 예매 시 발생하는 문제점을 해결하기 위해 새로운 티켓 예매 시스템을 개발하고자 한다. 안정적인 서버 운영, 공정한 티켓 배분, 불법 암표 거래 방지 등을 통해 팬들에게 더 쾌적한 콘서트 예매 환경을 제공하고자 한다.

 Cash Ticket은 콘서트 VIP좌석 한정 실시간 티켓 경매 시스템이다. 1인 1매를 원칙으로 하며, 경매에 참여한 사람들은 실시간으로 입찰가를 확인할 수 있다. 다만 자신의 입찰가는 총 3번만 제출가능하다. 일정 시간 동안 경매가 진행되고, 경매가 끝난 후 자신의 입찰가가 최종 VIP좌석 수 안에 들면 티켓을 낙찰받을 수 있다. 만약, 낙찰받은 티켓 취소 시 좌석 수 안에 들지 못한 경매가 중 높은 가격을 제시한 사람들의 순으로 티켓을 살 수 있는 권리가 양도된다.

 그리고 이러한 경매 시스템 진행시에 발생하는 대규모 트래픽 증가에도 불구하고 원활한 페이지 로딩과 빠른 데이터 처리를 보장할 수 있는 시스템을 구축하는 기술적인 부분을 중점으로 한다. 대용량 트래픽 처리 및 데이터베이스 안정성 확보, Redis 캐시, Redis Pub/Sub을 활용한 이벤트기반 아키텍처와 NginX 로드 밸런싱 등을 활용한 부하 분산 및 성능 최적화를 바탕으로 빠르고 효율적인 경매 시스템을 구현하고자 한다.

### 핵심 기능

- 로그인/ 회원가입
- 콘서트 정보 조회
- Vip 티켓 경매(기회 차감표시)/ 취소 
- 실시간 경매가, 순위 아웃시 (경매가 수정 기회 다 쓰면 알림x)
- 최종 순위 확인
- 마이페이지
    - 티켓 예매/취소 내역
    - 내 정보수정(나이,인적사항, email)

## 3. 필요성 (Needs)

### 기존 문제점

- **서버 과부하로 인한 티켓팅 실패**
    - 인기 아티스트의 콘서트 예매 시 수십만 명이 동시에 접속하면서 서버가 과부하 상태에 빠진다.
    - 이로 인해 시스템이 정상적으로 작동하지 않거나, 접속이 끊겨 예매에 실패하는 경우가 많다.
- **진정한 팬들도 티켓을 구하지 못하는 문제**
    - 아티스트의 열렬한 팬이며, 콘서트 티켓을 구매할 경제적 여건이 충분함에도 불구하고, 단 한 번의 클릭 실수로 예매에 실패하는 상황이 빈번하게 발생한다.
- **불법 티켓 재판매(암표) 문제 심화**
    - 티켓 예매에 실패한 팬들을 대상으로 업자들이 티켓을 2~10배 비싼 가격에 되팔아 폭리를 취한다.
    - 이를 노린 업자들이 자동화된 프로그램(매크로) 등을 이용해 티켓팅을 시도하면서, 정작 콘서트를 간절히 원하는 팬들의 티켓팅 성공 확률이 더욱 낮아지는 악순환이 발생한다.

### 차별점

- **안정적인 서버 운영을 위한 분산 시스템 구축**
    - 대규모 트래픽을 처리할 수 있도록 분산 시스템을 도입하여, 많은 사용자가 동시에 접속해도 서버가 다운되지 않는 안정적인 환경을 제공한다.
- **공정한 ‘VIP팬을 위한 경매 시스템’ 도입**
    - 기존의 단순 선착순 방식이 아닌 경매 방식을 도입하여, 단 몇 초 차이로 원하는 티켓을 얻지 못하는 불공평한 상황을 방지한다.
    - 팬들이 자신의 경제적 여건에 맞춰 합리적인 가격에 티켓을 확보할 수 있도록 한다.
- **불법 티켓 재판매(암표) 문제 해결**
    - 팬들이 공식적인 경매 시스템을 통해 원하는 티켓을 구매할 기회를 얻으면서, 암표에 대한 수요가 자연스럽게 감소한다.
    - 불법 업자들이 개입할 여지가 줄어들어, 건전한 예매 문화 정착에 기여할 수 있다.
    - ‘VIP 경매 시스템’과 ‘일반 예매 시스템’이 함께 운영되면서, 모든 팬들이 보다 공정한 환경에서 티켓을 구할 수 있도록 개선된다.

 **이 시스템을 통해 티켓 예매의 공정성을 높이고, 진정한 팬들이 보다 쉽게 콘서트에 갈 수 있는 기회를 제공한다고 기대 할 수 있다.**

## 4. 목표 (Goals)

- 빠르고 효율적인 실시간 경매 시스템 구축함.
- 대용량 트래픽시에도 효율적으로 부하를 분산해 안정적인 클라우드 구축함.
- 급격한 트패픽 증가에도 부하를 메세지 큐를 이용하여 데이터베이스 서버 안정성을 보장함.

## 5. 사용할 기술 (Technologies)

### 백엔드

- **Java Spring** (Spring 기반 웹 애플리케이션 및 RESTful 서비스 개발을 위한 프레임워크)
- Lombok (클래스의 보일러플레이트 코드를 줄이기 위한 어노테이션 라이브러리)
- Spring Data JPA (JPA 기반 데이터베이스 작업)
- **Lettuce Client** (Redis와의 연결을 위한 클라이언트 라이브러리)

### 프론트엔트

- Thymeleaf (SSR 템플릿 엔진)
- Bootstrap (CSS & JS 라이브러리)

### 데이터베이스

- **MySQL** (RDBMS)
- **redis** (캐싱, 메세지큐)
- **H2 Database** (경량화된 임베디드 데이터베이스, 테스트 환경에서 사용)

### 테스트

- **Spring Test**
- **Mockito** (Mocking을 이용해 테스트 수행)
- JUnit 5 (JAVA 테스트 프레임워크)

### 인프라

- **Docker hub**
- **github actions** (CI/CD)
- **AWS ec2** (클라우드 베포)
- **NginX** (load balancing L7 switch)

### 성능 검증

- Ngrinder (가상의 유저를 생성하고 지정된 초당 요청을 서버로 보낸다)
- 단일서버 일때 병목현상이 생기기전 트래픽, 우리 서비스의 아키텍처일때 병목현상이 생기기 전 트래픽을 비교한다.
